version: "3.1"
stories:
- story: Test user affirms to check restaurant after logging in (./tests/test_stories.yml)
  steps:
  - intent: greet
  - action: action_utter_greet_and_intro
  - action: action_ask_language_preference
  - intent: inform_permanent_language
  - slot_was_set:
    - permanent_language: en
  - action: action_set_permanent_language
  - action: action_utter_wanna_book
  - intent: affirm
  - action: action_ask_registered_and_show_login_signup_quick_replies
  - intent: request_login_form
  - action: login_form
  - active_loop: login_form
  - slot_was_set:
    - user_email: kalpa@gmail.com
  - slot_was_set:
    - user_password: pass
  - active_loop: null
  - action: action_login_user
  - slot_was_set:
    - is_authenticated: true
  - intent: request_restaurants
  - action: action_show_cuisines  # predicted: action_unlikely_intent
  - intent: inform_cuisine
  - slot_was_set:
    - cuisine: italian
  - action: action_show_restaurants  # predicted: action_unlikely_intent
  - intent: inform_booking_restaurant_id
  - action: action_show_selected_restaurant_ask_booking_confirmation
  - intent: affirm
  - action: restaurant_booking_form
  - active_loop: restaurant_booking_form
  - intent: inform_num_people
    entities:
    - num_people: '2'
  - slot_was_set:
    - num_people: '2'
  - action: action_listen  # predicted: action_deactivate_form
  - intent: inform_date
    entities:
    - date: 2024/01/01
  - slot_was_set:
    - date: 2024/01/01
  - action: restaurant_booking_form  # predicted: action_deactivate_form
  - active_loop: null
  - action: action_show_booking_summary
  - intent: affirm
  - action: action_confirm_booking  # predicted: action_utter_goodbye after action_unlikely_intent
  - action: action_utter_thank_you  # predicted: action_listen
  - action: action_ask_anything_else
