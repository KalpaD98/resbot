# domain.yml is the file where you define the domain of your assistant.
# This includes the intents, entities, slots, templates, all_actions, and forms your assistant uses.

version: "3.1"

# NLU training dataF

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# ---------------------------------------------------- Intents ------------------------------------------------------ #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

intents:

  # ---------------------------------------------------- nlu.yml ----------------------------------------------------- #
  - greet
  - mood_unhappy
  - mood_great
  - goodbye
  - affirm
  - deny
  - thank_you
  - stop
  - emoji_mood_great
  - emoji_mood_unhappy
  - emoji_goodbye
  - emoji_affirm
  - emoji_deny

  # ---------------------------------------------------- cuisine.yml ------------------------------------------------- #
  - request_cuisines
  - inform_cuisine

  # ------------------------------------------ nlu-query-knowledge-base.yml ------------------------------------------ #
  - query_knowledge_base

  # --------------------------------------------- nlu-restaurant-booking.yml ----------------------------------------- #
  - inform_num_people
  - inform_date
  - inform_time
  - request_booking_details
  - inform_restaurant_id
  - inform_view_details_restaurant_id
  - inform_booking_restaurant_id
  - view_all_bookings
  - view_upcoming_bookings
  - view_past_bookings
  - user_wants_to_change_restaurant_booking_date
  - inform_change_date_booking_id
  - user_wants_to_change_booking_num_people
  - inform_change_num_people_booking_id
  - user_wants_to_cancel_booking
  - inform_cancel_booking_id

  # -------------------------------------------- nlu-restaurant-inform.yml  ----------------------------------------- #
  - inform_location
  - inform_city
  - inform_state
  - inform_restaurant_name

  # ---------------------------------------- nlu-restaurant-multi-intents.yml ---------------------------------------- #
  - search_restaurant + inform_opening_hours
  - search_restaurant + inform_location
  - search_restaurant + inform_date + inform_time + inform_num_people

  # -------------------------------------------- nlu-restaurant-requests.yml ----------------------------------------- #
  - request_restaurants
  - request_menu
  - request_more_restaurant_options
  - request_opening_hours
  - request_ambiance
  # ---------------------------------------------- nlu-restaurant-search.yml ----------------------------------------- #
  - want_to_search_restaurants
  - search_restaurants
  # ------------------------------------ nlu-small-talk-and-out-of-scope.yml ----------------------------------------- #

  # No need to add retrieval intents?
  - bot_challenge
  # -------------------------------------------------- nlu-user.yml -------------------------------------------------- #
  - request_user_registration_form
  - request_login_form
  - logout
  - inform_user_name
  - inform_user_email
  - inform_user_password

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# ---------------------------------------------------- Entities ----------------------------------------------------- #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

entities:
  - object_type
  - mention
  - attribute

  # Restaurant
  - selected_restaurant
  - restaurant_offset
  - restaurant_name
  - restaurant_id
  - opening_hours
  - cuisine

  - price_range
  - ambiance
  - city

  # Booking
  - selected_booking
  - booking_id
  - num_people
  - date
  - time

  - cancel_booking_id

  # User
  - logged_user
  - user_id
  - user_name
  - user_email
  - user_password

  - preferences

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# ----------------------------------------------------- Slots ------------------------------------------------------- #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

slots:

  cuisine:
    type: text
    mappings:
      - type: from_entity
        entity: cuisine
        intent:
          - inform_cuisine
          - search_restaurants

  restaurant_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: restaurant_id
        intent:
          - inform_restaurant_id
          - inform_booking_restaurant_id
          - inform_view_details_restaurant_id

  selected_restaurant:
    type: any
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: selected_restaurant

  restaurant_offset:
    type: any
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: restaurant_offset

  selected_booking:
    type: any
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: selected_booking
  booking_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: booking_id
  num_people:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: num_people
        intent:
          - inform_num_people
  date:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: date
        intent:
          - inform_date
          - search_restaurants
  time:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: time
        intent:
          - inform_time
          - search_restaurants
  cancel_booking_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: cancel_booking_id
        intent:
          - inform_cancel_booking_id

  # ----------------------------------------------- user related slots ----------------------------------------------- #
  logged_user:
    type: any
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: logged_user
  user_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: user_id
  user_name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: user_name
      - type: from_text
        intent:
          - inform_user_name
  user_email:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: user_email
      - type: from_text
        intent:
          - inform_user_email
  user_password:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: user_password
      - type: from_text
        intent:
          - inform_user_password

  # --------------------------------------- Knowledge base query related slots --------------------------------------- #

  object_type:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: object_type

  mention:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: mention

  attribute:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: attribute

  preferences:
    type: list
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: preferences

  restaurant_name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: restaurant_name

  city:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: city


# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# ------------------------------------------------------ Forms ------------------------------------------------------ #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

forms:

  restaurant_booking_form:
    required_slots:
      - num_people
      - date

  change_restaurant_booking_date_form:
    required_slots:
      - date

  registration_form:
    required_slots:
      - user_name
      - user_email
      - user_password

  login_form:
    required_slots:
      - user_email
      - user_password

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# ---------------------------------------------------- Actions ------------------------------------------------------ #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

actions:
  - action_query_knowledge_base                                 # query db_knowledge base
  - action_show_cuisines                                        # show cuisines
  - action_show_restaurants                                     # show restaurants (will filter by cuisine if provided)
  - action_show_more_restaurant_options                         # show more restaurant options
  - action_show_selected_restaurant_details                     # show selected restaurant details
  - action_show_booking_summary                                 # show booking summary

  - action_confirm_booking                                      # confirm booking
  - action_show_selected_restaurant_ask_booking_confirmation    # ask booking confirmation for the selected restaurant

  - action_ask_anything_else                                    # ask anything else with quick replies
  - action_retry_login_or_stop

  - action_ask_registered_and_show_login_signup_quick_replies

  # -------------------------------------------- Slot Validation Actions --------------------------------------------- #
  - action_validate_cuisine
  - action_validate_restaurant_id
  - action_validate_num_people
  - action_validate_date
  - action_validate_time
  - action_validate_user_id
  - action_validate_booking_reference_id
  - action_save_user_and_complete_registration

  # -------------------------------------------- Form Validation Actions --------------------------------------------- #

  - validate_registration_form
  - validate_restaurant_booking_form
  - validate_change_restaurant_booking_date_form
  # --------------------------------------------  ---------------------------------------#
  - action_login_user
  #  - action_check_user_logged_in

  - action_show_past_bookings
  - action_show_upcoming_bookings
  - action_show_all_bookings
  - action_show_user_bookings_carousel
  - action_change_restaurant_booking_date
  - action_show_new_booking_details
  - action_ask_cancel_booking_confirmation
  - action_ask_cancel_another_booking
  - action_cancel_booking

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# ------------------------------------------- Responses: Bot Utterances --------------------------------------------- #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

responses:

  utter_greet:
    - text: Hi!
    - text: Hey!
    - text: Hello!
    - text: Hi 😃 there!
    - text: Hello there 😀

  utter_please_rephrase:
    - text: I'm sorry, I couldn't understand that. Could you rephrase it?
    - text: Sorry I didn't get that. Can you rephrase?
    - text: Sorry, I'm not sure I understand. Can you rephrase?

  utter_greet_again:
    - text: Hi there again!
    - text: Hello again!

  utter_mood_great_feedback:
    - text: Cool! 😎
    - text: Nice to hear 😃 that
    - text: Happy to hear 😊

  utter_mood_unhappy_feedback:
    - text: Sorry to hear that, maybe having something will make you feel better.
    - text: Hmm, eating something might help you feel better.

  utter_emoji_great_feedback:
    - text: 😊
    - text: 😄

  utter_emoji_mood_unhappy_feedback:
    - text: Eating something might help 🤗
    - text: Eating something might help 😊

  utter_thank_you:
    - text: Thank you for using our service. If you need any assistance in the future, feel free to ask.

  utter_welcome:
    - text: You're welcome!
    - text: No problem!
    - text: Happy to help!
    - text: My pleasure!
    - text: Anytime!
    - text: Always happy to help!

  utter_goodbye:
    - text: Bye
    - text: Goodbye
    - text: Farewell
    - text: See you later

  utter_bot_intro:
    - text: I'm ResBot! 🍴, I can recommend amazing restaurants and make reservations seamless for you 🌟.
    - text: I'm ResBot, your dining assistant. I help find ideal restaurants and make reservations for you 🌟.

  utter_wanna_book:
    - text: Would you like to reserve a table at a fantastic restaurant? 🍽️

  utter_bye_see_you_later:
    - text: Good Bye. See you later!

  utter_processing_the_request: # change data a bit
    - text: Let me check
    - text: Sure!
    - text: I'll see what I can find out.
    - text: I'll check and get back to you.


  # user related responses

  utter_ask_registered_user:
    - text: Are you a registered user?

  utter_ask_user_name:
    - text: May i know your name? (first name is sufficient)
  utter_ask_user_email:
    - text: Enter your email address.
  utter_ask_user_password:
    - text: Enter password.

  utter_registration_successful:
    - text: Registration successful! we automatically logged you {user_name}
  utter_login_success:
    - text: You have successfully logged in. Welcome back!

  utter_login_to_continue:
    - text: Please login to continue.
    # throw quick replies for login and signup ("I don't have an account")

  utter_already_logged_in:
    - text: You are already logged in.

  # booking related

  # restaurant and booking related responses. [utter_ask_<slot_name>] for slot filling

  utter_ask_date:
    - text: When would you like to make the booking? A future date (tomorrow or later) in the format [YYYY/MM/DD] is preferred
    - text: What date do you have in mind for the booking?  A future date (tomorrow or later) in the format [YYYY/MM/DD] is preferred

  #  utter_preferred_date_format:
  #    - text: A future date (tomorrow or later) in the format [DD-MM-YYYY] is preferred

  utter_ask_num_people:
    - text: May I know the number of people for the booking?
    - text: For how many people are you planing to make the reservation?

  utter_ask_cancel_booking_confirmation: # change according to the data
    - text: "Are you sure you want to cancel the booking at {restaurant['name']} on {selected_booking['date']} for {num_people} people? This action cannot be undone."

  utter_ask_cancel_another_booking:
    - text: "Do you want to cancel another booking?"

  # change booking date
  utter_ask_new_booking_date:
    - text: "What is the new date for the booking?"

  utter_ask_change_another_booking:
    - text: "Do you want to change another booking?"

  # ------------------------------------------ Retrieval Intent Responses -------------------------------------------- #
  utter_bot_challenge/what_can_you_do:
    - text: I can help you book a restaurant 🍴.
    - text: I can help you find restaurants and book a table 🍽️.

  utter_out_of_scope/out_of_functionality:
    - text: Sorry, I can't handle that request 🥲. I can help you book a restaurant 😃.
    - text: Sorry, I can't do that 😢. I can help you book a restaurant 😃.
    - text: Sorry, I can't help you with that 🥹. I can help you book a restaurant 😃.

  utter_bot_challenge/bot:
    - text: I am ResBot, powered by Rasa.
    - text: I am ResBot, a bot powered by Rasa.

  utter_bot_challenge/who_are_you:
    - text: I am ResBot, I can recommend restaurants and help you make a reservation 🍴.
    - text: I am ResBot, I can help you find restaurants and book a table 🍽️.

  utter_out_of_scope/food:
    - text: I understand you want to order food, but i'm afraid i can't handle that skill yet 😢.

  utter_out_of_scope/hotel:
    - text: I understand you want to book a hotel, but i'm afraid i can't handle that skill yet 😢.

# -------------------------------------------------------------------------------------------------------------------- #

# config:
#  store_entities_as_slots: true

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

  # ----------------------------------------------- Removed Utterances ------------------------------------------------- #

  #  utter_checkout_restaurants:
  #    - text: Wanna checkout restaurants?
  #    - text: Wanna checkout places to eat something ?
  #    - text: Want to check out some restaurants?
  #    - text: Interested in finding a restaurant to eat at?

  # ------------------------------------------------- Removed Forms ---------------------------------------------------- #


  # long forms
  #  basic_restaurant_search_form:
  #    ignored_intents:
  #      - out_of_scope
  #      - bot_challenge
  #    required_slots:
  #      - cuisine
  #  #      - user_id
  #
  #  advance_restaurant_search_form:
  #    ignored_intents:
  #      - out_of_scope
  #      - bot_challenge
  #    required_slots:
  #      - user_id
  #      - cuisine
  #      - city
  #      - preferences                        # intent:preference, utter_ask_preference; What would you like to have ?
  #
  #  restaurant_booking_form:
  #    ignored_intents:
  #      - out_of_scope
  #      - bot_challenge
  #    required_slots:
  #      - restaurant_id
  #      - num_people
  #      - date

  #      - user_id # for now we don't need this

  # future forms

  # sign up form
  # user_name

  # short forms
#
#  user_id_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#    required_slots:
#      - user_id
#
#  restaurant_id_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#      - inform_cuisine
#    required_slots:
#      - restaurant_id
#
#  cuisine_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#    required_slots:
#      - cuisine
#
#  city_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#    required_slots:
#      - city
#
#  preferences_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#    required_slots:
#      - preferences
#
#  num_people_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#    required_slots:
#      - num_people
#
#  date_form:
#    ignored_intents:
#      - out_of_scope
#      - bot_challenge
#    required_slots:
#      - date
