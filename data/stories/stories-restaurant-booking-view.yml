version: "3.1" # stories-view-restaurant-booking.yml has stories for user viewing their bookings

# currently only logged in cases are handled

stories:

  - story: User wants to view all bookings (logged in)   # view all bookings
    steps:
      - intent: view_all_bookings
      - slot_was_set:
          - is_authenticated: True
      - action: action_show_bookings_carousal

  # view upcoming bookings
  - story: User wants to view upcoming bookings (logged in)
    steps:
      - intent: view_upcoming_bookings
      - slot_was_set:
          - is_authenticated: True
      - action: action_show_future_bookings_carousal

  # view past bookings
  - story: User wants to view past bookings (logged in)
    steps:
      - intent: view_past_bookings
      - slot_was_set:
          - is_authenticated: True
      - action: action_show_past_bookings_carousal

  # cases where user is not logged in
  - story: User wants to view bookings (not logged in)
    steps:
      - intent: view_bookings
      - slot_was_set:
          - is_authenticated: False
      - action: login_form
      - active_loop: login_form
      - checkpoint: login_completed

  - story: Submit login form for bookings
    steps:
      - checkpoint: login_completed
      - action: login_form
      - active_loop: null
      - slot_was_set:
          - requested_slot: null
      - action: action_login_user
      - slot_was_set:
          - is_authenticated: True
      - checkpoint: after_login_completed

  - story: Show past bookings after login
    steps:
      - checkpoint: after_login_completed
      - intent: view_past_bookings
      - action: action_show_past_bookings_carousal

  - story: Show upcoming bookings after login
    steps:
      - checkpoint: after_login_completed
      - intent: view_upcoming_bookings
      - action: action_show_future_bookings_carousal

  - story: Show all bookings after login
    steps:
      - checkpoint: after_login_completed
      - intent: view_all_bookings
      - action: action_show_bookings_carousal