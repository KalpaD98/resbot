version: "3.1" # stories-restaurant-booking.yml has general stories for the booking

stories:

  # all below stories starts from action_show_cuisines. continue from greeting stories

  - story: User wants to book a restaurant directly #1 Happy Path
    steps:
      - action: action_show_cuisines
      - intent: inform_cuisines
      - slot_was_set:
          - cuisine: chinese
      - action: action_show_restaurants
      - intent: inform_booking_restaurant_id
      - slot_was_set:
          - restaurant_id: rid_121290
      - action: action_show_selected_restaurant_ask_booking_confirmation
      - intent: affirm
      - action: restaurant_booking_form
      - active_loop: restaurant_booking_form
      - slot_was_set:
          - num_people: 2
      - slot_was_set:
          - date: 2023-06-06
      - active_loop: null
      - action: action_show_booking_summary
      - intent: affirm
      - action: action_confirm_booking
      - action: utter_thank_you

  - story: User denies to book restaurant directly after seeing booking details #2 Sad Path
    steps:
      - action: action_show_cuisines
      - intent: inform_cuisines
      - slot_was_set:
          - cuisine: chinese
      - action: action_show_restaurants
      - intent: inform_booking_restaurant_id
      - slot_was_set:
          - restaurant_id: rid_121290
      - action: action_show_selected_restaurant_ask_booking_confirmation
      - intent: affirm
      - action: restaurant_booking_form
      - active_loop: restaurant_booking_form
      - slot_was_set:
          - num_people: 2
      - slot_was_set:
          - date: 2023-06-06
      - active_loop: null
      - action: action_show_booking_summary
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

  - story: User denies to book restaurant after direct selection #3 Sad Path
    steps:
      - slot_was_set:
          - user_id: uid_123
      - action: action_show_cuisines
      - intent: inform_cuisines
      - slot_was_set:
          - cuisine: chinese
      - action: action_show_restaurants
      - intent: inform_booking_restaurant_id
      - slot_was_set:
          - restaurant_id: rid_121290
      - action: action_show_selected_restaurant_ask_booking_confirmation
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

  - story: Book restaurant after view details happy path #4 Happy path
    steps:
      - action: action_show_cuisines
      - intent: inform_cuisines
      - slot_was_set:
          - cuisine: chinese
      - action: action_show_restaurants
      - intent: inform_view_details_restaurant_id
      - slot_was_set:
          - restaurant_id: rid_121290
      - action: action_show_selected_restaurant_details
      - intent: affirm
      - action: restaurant_booking_form
      - active_loop: restaurant_booking_form
      - slot_was_set:
          - num_people: 2
      - slot_was_set:
          - date: 2023-06-06
      - active_loop: null
      - action: action_show_booking_summary
      - intent: affirm
      - action: action_confirm_booking
      - action: utter_thank_you

  - story: User denies booking after viewing booking summary #5 Sad Path
    steps:
      - slot_was_set:
          - user_id: uid_123
      - action: action_show_cuisines
      - intent: inform_cuisines
      - slot_was_set:
          - cuisine: chinese
      - action: action_show_restaurants
      - intent: inform_view_details_restaurant_id
      - slot_was_set:
          - restaurant_id: rid_121290
      - action: action_show_selected_restaurant_details
      - intent: affirm
      - action: restaurant_booking_form
      - active_loop: restaurant_booking_form
      - slot_was_set:
          - num_people: 2
      - slot_was_set:
          - date: 2023-06-06
      - active_loop: null
      - action: action_show_booking_summary
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

  - story: User denies after viewing restaurant details #6 Sad Path
    steps:
      - slot_was_set:
          - user_id: uid_123
      - action: action_show_cuisines
      - intent: inform_cuisines
      - slot_was_set:
          - cuisine: chinese
      - action: action_show_restaurants
      - intent: inform_view_details_restaurant_id
      - slot_was_set:
          - restaurant_id: rid_121290
      - action: action_show_selected_restaurant_details
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

# --------------------- improved below ------------------------
#  - story: User wants to book a restaurant directly #7 Happy Path
#    steps:
#      - checkpoint: greet_and_intro_checkpoint
#      - action: action_show_restaurants
#      - intent: inform_booking_restaurant_id
#      - slot_was_set:
#          - restaurant_id: [ "rid_121290" ]
#      - action: action_show_selected_restaurant_ask_booking_confirmation
#      - intent: affirm
#      - action: restaurant_booking_form
#      - active_loop: restaurant_booking_form
#      - slot_was_set:
#          - num_people: 2
#      - slot_was_set:
#          - date: 2023-06-06
#      - active_loop: null
#      - action: action_show_booking_summary
#      - intent: affirm
#      - action: action_confirm_booking
#      - action: utter_thank_you
#
#
#  - story: User denies to book restaurant directly after seeing booking details #8 Sad Path
#    steps:
#      - checkpoint: greet_and_intro_checkpoint
#      - action: action_show_restaurants
#      - intent: inform_booking_restaurant_id
#      - slot_was_set:
#          - restaurant_id: [ "rid_121290" ]
#      - action: action_show_selected_restaurant_ask_booking_confirmation
#      - intent: affirm
#      - action: restaurant_booking_form
#      - active_loop: restaurant_booking_form
#      - slot_was_set:
#          - num_people: 2
#      - slot_was_set:
#          - date: 2023-06-06
#      - active_loop: null
#      - action: action_show_booking_summary
#      - intent: deny
#      - action: utter_thank_you
#      - action: action_ask_anything_else
#
#  - story: User denies to book restaurant after direct selection #9 Sad Path
#    steps:
#      - checkpoint: greet_and_intro_checkpoint
#      - action: action_show_restaurants
#      - intent: inform_booking_restaurant_id
#      - slot_was_set:
#          - restaurant_id: [ "rid_121290" ]
#      - action: action_show_selected_restaurant_ask_booking_confirmation
#      - intent: deny
#      - action: utter_thank_you
#      - action: action_ask_anything_else
#
#  - story: greet and book restaurant after view details happy path  #10 Happy path
#    steps:
#      - checkpoint: greet_and_intro_checkpoint
#      - action: action_show_restaurants
#      - intent: inform_view_details_restaurant_id
#      - slot_was_set:
#          - restaurant_id: [ "rid_121290" ]
#      - action: action_show_selected_restaurant_details
#      - intent: affirm
#      - action: restaurant_booking_form
#      - active_loop: restaurant_booking_form
#      - slot_was_set:
#          - num_people: 2
#      - slot_was_set:
#          - date: 2023-06-06
#      - active_loop: null
#      - action: action_show_booking_summary
#      - intent: affirm
#      - action: action_confirm_booking
#      - action: utter_thank_you
#
#
#  - story: User denies booking after viewing booking summary #11 Sad Path
#    steps:
#      - checkpoint: greet_and_intro_checkpoint
#      - action: action_show_restaurants
#      - intent: inform_view_details_restaurant_id
#      - slot_was_set:
#          - restaurant_id: [ 'rid_121290' ]
#      - action: action_show_selected_restaurant_details
#      - intent: affirm
#      - action: restaurant_booking_form
#      - active_loop: restaurant_booking_form
#      - slot_was_set:
#          - num_people: ['2']
#      - slot_was_set:
#          - date: ['2023-06-06']
#      - active_loop: null
#      - action: action_show_booking_summary
#      - intent: deny
#      - action: utter_thank_you
#      - action: action_ask_anything_else
#
#  - story: User denies after viewing restaurant details #12 Sad Path
#    steps:
#      - checkpoint: greet_and_intro_checkpoint
#      - action: action_show_restaurants
#      - intent: inform_view_details_restaurant_id
#      - slot_was_set:
#          - restaurant_id: [ "rid_121290" ]
#      - action: action_show_selected_restaurant_details
#      - intent: deny
#      - action: utter_thank_you
#      - action: action_ask_anything_else