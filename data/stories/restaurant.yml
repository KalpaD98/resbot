version: "3.1"
# stories/restaurant.yml has stories for the restaurant bot
# Because rules do not generalize to unseen conversations, you should reserve them for single-turn conversation snippets,
# and use stories to train on multi-turn conversations.

stories:
  # ----------------------------------------------- Restaurant Booking ----------------------------------------------- #

  #10 Happy path for restaurant booking initiation
  - story: greet and book restaurant happy path
    steps:
      - action: utter_greet
      - action: utter_bot_intro
      - action: utter_wanna_book
      - intent: affirm
      - action: action_show_cuisines
      - intent: inform_cuisine
      - action: action_show_restaurants
      - intent: inform_view_details_restaurant_id
      - slot_was_set:
          - restaurant_id: [ "rtid_121290" ]
      - action: action_show_selected_restaurant_details
      - intent: affirm
      - action: utter_ask_num_people
      - intent: inform_num_people
      - slot_was_set:
          - num_people: [ 2 ]
      - action: utter_ask_date
      - action: utter_preferred_date_format
      - intent: inform_date
      - action: action_validate_date
      - slot_was_set:
          - date: [ "2023-04-01" ]
      - action: action_show_booking_summary
      - intent: affirm
      - action: action_confirm_booking
      - action: utter_thank_you

  #11
  - story: User denies after viewing restaurant details
    steps:
      - action: utter_greet
      - action: utter_bot_intro
      - action: utter_wanna_book
      - intent: affirm
      - action: action_show_cuisines
      - intent: inform_cuisine
      - action: action_show_restaurants
      - intent: inform_view_details_restaurant_id
      - slot_was_set:
          - restaurant_id: [ "rtid_121290" ]
      - action: action_show_selected_restaurant_details
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

  #12 User denies booking after viewing booking summary
  - story: User denies booking after viewing booking summary
    steps:
      - action: utter_greet
      - action: utter_bot_intro
      - action: utter_wanna_book
      - intent: affirm
      - action: action_show_cuisines
      - intent: inform_cuisine
      - action: action_show_restaurants
      - intent: inform_view_details_restaurant_id
      - slot_was_set:
          - restaurant_id: [ "rtid_121290" ]
      - action: action_show_selected_restaurant_details
      - intent: affirm
      - action: utter_ask_num_people
      - intent: inform_num_people
      - slot_was_set:
          - num_people: [ 2 ]
      - action: utter_ask_date
      - action: utter_preferred_date_format
      - intent: inform_date
      - action: action_validate_date
      - slot_was_set:
          - date: [ "2023-04-01" ]
      - action: action_show_booking_summary
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

  #13 directly book a restaurant by selecting from carousal
  - story: User want to book restaurant directly
    steps:
      - action: utter_greet
      - action: utter_bot_intro
      - action: utter_wanna_book
      - intent: affirm
      - action: action_show_cuisines
      - intent: inform_cuisine
      - action: action_show_restaurants
      - intent: inform_booking_restaurant_id
      - slot_was_set:
          - restaurant_id: [ "rtid_121290" ]
      - action: action_select_restaurant_ask_booking_confirmation
      - intent: affirm
      - action: utter_ask_num_people
      - intent: inform_num_people
      - slot_was_set:
          - num_people: [ 2 ]
      - action: utter_ask_date
      - action: utter_preferred_date_format
      - intent: inform_date
      - action: action_validate_date
      - slot_was_set:
          - date: [ "2023-04-01" ]
      - action: action_show_booking_summary
      - intent: affirm
      - action: action_confirm_booking
      - action: utter_thank_you

  #14 deny to book after selection
  - story: User denies to book restaurant directly after selection
    steps:
      - action: utter_greet
      - action: utter_bot_intro
      - action: utter_wanna_book
      - intent: affirm
      - action: action_show_cuisines
      - intent: inform_cuisine
      - action: action_show_restaurants
      - intent: inform_booking_restaurant_id
      - slot_was_set:
          - restaurant_id: [ "rtid_121290" ]
      - action: action_select_restaurant_ask_booking_confirmation
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else
  #15
  - story: User denies to book restaurant directly after seeing booking details
    steps:
      - action: utter_greet
      - action: utter_bot_intro
      - action: utter_wanna_book
      - intent: affirm
      - action: action_show_cuisines
      - intent: inform_cuisine
      - action: action_show_restaurants
      - intent: inform_booking_restaurant_id
      - slot_was_set:
          - restaurant_id: [ "rtid_121290" ]
      - action: action_select_restaurant_ask_booking_confirmation
      - intent: affirm
      - action: utter_ask_num_people
      - intent: inform_num_people
      - slot_was_set:
          - num_people: [ 2 ]
      - action: utter_ask_date
      - action: utter_preferred_date_format
      - intent: inform_date
      - action: action_validate_date
      - slot_was_set:
          - date: [ "2023-04-01" ]
      - action: action_show_booking_summary
      - intent: deny
      - action: utter_thank_you
      - action: action_ask_anything_else

  # Happy path for user wants to search restaurants by criteria they provide (basic and advance)

  # ---------------------------------------------- Knowledge Base ------------------------------------------------ #

  # ---------------------------------------------- Backup ------------------------------------------------------- #
